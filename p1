import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.datasets import fetch_california_housing

data=fetch_california_housing(as_frame=True)
housing_df=data.frame
numerical_features=housing_df.select_dtypes(include=[np.number]).columns

plt.figure(figsize=(15,10))
for i,feature in enumerate(numerical_features):
    plt.subplot(3,3,i+1)
    sns.histplot(housing_df[feature],kde=True,color="blue",bins=30)
    plt.title(f"Distribution of {feature}")
plt.tight_layout()
plt.show()

plt.figure(figsize=(15,10))
for i,feature in enumerate(numerical_features):
    plt.subplot(3,3,i+1)
    sns.boxplot(x=housing_df[feature],color="orange")
    plt.title(f"BoxPlot of {feature}")
plt.tight_layout()
plt.show()

print("outliers detection")
outlier_summary={}
for feature in numerical_features:
    Q1=housing_df[feature].quantile(0.25)
    Q3=housing_df[feature].quantile(0.75)
    IQR=Q3-Q1
    l_b=Q1-1.5*IQR
    u_b=Q3+1.5*IQR
    outlier=housing_df[(housing_df[feature]<l_b)|(housing_df[feature]>u_b)]
    outlier_summary[feature]=len(outlier)
    print(f"{feature}:{len(outlier)}outliers")
print("\n Summary")
print(housing_df.describe())
